{% extends 'base.html' %}
{% block content %}
<div class="center-narrow">
  <div class="kicker">PAYROLL</div>
  <h1>{{ company_name }} · 월 선택</h1>

  <div class="card mb-14 flex-center gap-10">
    <button class="btn" data-action="changeYearPrev">◀</button>
    <strong class="fs-20 minw-120 text-center">{{ year }}년</strong>
    <button class="btn" data-action="changeYearNext">▶</button>
  </div>

  <div class="card p-16">
    <input type="hidden" id="currentYear" value="{{ year }}">
    <div class="grid-months">
      {% for m in months %}
      <a class="month-btn {{ m.state }}{% if m.is_current %} current{% endif %}"
         href="{{ url_for('portal.edit_payroll', slug=slug, year=year, month=m.month) }}">
        <div class="m">{{ '%02d'|format(m.month) }}월</div>
        <div class="s">
          {% if m.state == 'closed' %}
            마감
          {% elif m.state == 'saved' %}
            저장됨
          {% elif m.state == 'none' %}
            미입력
          {% else %}
            미입력
          {% endif %}
        </div>
        <div class="u">{{ m.updated_at }}</div>
      </a>
      {% endfor %}
    </div>
    <div class="legend">
      <span class="badge b-closed">마감</span>
      <span class="badge b-saved">저장됨</span>
      <span class="badge b-none">미입력</span>
      <span class="badge b-current">현재월</span>
    </div>
  </div>
</div>

 

<script nonce="{{ csp_nonce() }}" src="{{ url_for('static', filename='portal_home.js') }}"></script>
{% endblock %}

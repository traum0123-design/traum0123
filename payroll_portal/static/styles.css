:root{
  --bg:#f8fafc; --surface:#f1f5f9; --card:#ffffff; --text:#0f172a; --muted:#64748b; --border:#e2e8f0;
  --primary:#2563eb; --primary-600:#1d4ed8; --danger:#dc2626; --warn:#b45309; --success:#059669;
  --radius:12px; --shadow:0 8px 24px rgba(15,23,42,.08);
  --ui-scale:1
}
*{ box-sizing:border-box }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Malgun Gothic","Apple SD Gothic Neo";
  background:linear-gradient(180deg,var(--bg),#ffffff 300px);
  color:var(--text)
}
.container{ max-width:1680px; margin:0 auto; padding:20px }
.flex{ display:flex; align-items:center }
.between{ justify-content:space-between }
.items-center{ align-items:center }
.flex-1{ flex:1 }
.flex-center{ display:flex; align-items:center; justify-content:center }
.flex-end{ display:flex; justify-content:flex-end }
.flex-wrap{ flex-wrap:wrap }
.gap-8{ gap:8px }
.gap-10{ gap:10px }
.gap-6{ gap:6px }
.gap-4{ gap:4px }
.text-center{ text-align:center }
.minw-120{ min-width:120px }
.fs-20{ font-size:20px }
.mb-14{ margin-bottom:14px }
.mt-12{ margin-top:12px }
.mt-8{ margin-top:8px }
.p-16{ padding:16px }
.p-12{ padding:12px }
.my-8{ margin:8px 0 }
.center-narrow{ max-width:960px; margin:0 auto }
.ml-8{ margin-left:8px }
.d-inline{ display:inline }
.d-block{ display:block }
.w-100{ width:100% }
.w-200{ width:200px }
.w-52{ width:52px }
.w-80{ width:80px }
.w-84{ width:84px }
.w-110{ width:110px }
.w-120{ width:120px }
.w-180{ width:180px }
.maxw-220{ max-width:220px }
.maxw-260{ max-width:260px }
.divider-v{ display:inline-block; width:1px; height:22px; background:#E2E8F0; }

/* Top bar */
.topbar{
  position:sticky; top:0; z-index:20;
  background:rgba(15,23,42,.9); backdrop-filter:saturate(150%) blur(6px);
  color:#fff; box-shadow:0 2px 12px rgba(2,6,23,.25)
}
.topbar .brand{ font-weight:800; letter-spacing:.2px }
.topbar .brand::before{ content:"•"; color:#60a5fa; margin-right:8px }
.topbar a{ color:#c7d2fe; margin-left:16px; text-decoration:none }
.topbar a:hover{ color:#fff }

/* Headings */
h1{ font-size:24px; margin:18px 0 }
h2{ font-size:18px; margin:8px 0 12px }

/* Cards */
.card{
  background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
  padding:18px; margin:16px 0; box-shadow:var(--shadow)
}
.card.warn{ border-color:#f59e0b; background:#fffbeb }

/* Forms */
.form label{ display:block; margin:10px 0; color:var(--text); font-weight:600 }
.form.inline label{ display:inline-block; margin-right:12px }
.form input, .form select, .form textarea{
  padding:calc(12px * var(--ui-scale)) calc(14px * var(--ui-scale)); width:100%; max-width:420px; border:1px solid var(--border);
  border-radius:10px; outline:none; background:#fff; font-size:calc(15px * var(--ui-scale))
}
.form input:focus, .form select:focus{ border-color:var(--primary); box-shadow:0 0 0 3px rgba(37,99,235,.15) }
.hint{ color:var(--muted); font-size:12px; margin-top:6px }

/* Buttons */
.btn, button{
  display:inline-flex; align-items:center; gap:8px;
  padding:9px 14px; border:1px solid var(--border); background:#fff; cursor:pointer;
  border-radius:10px; text-decoration:none; color:var(--text); transition:.15s ease-in-out; font-weight:600
}
.btn:hover, button:hover{ transform:translateY(-1px) }
.btn.primary, button.primary{ background:var(--primary); color:#fff; border-color:var(--primary) }
.btn.primary:hover, button.primary:hover{ background:var(--primary-600); border-color:var(--primary-600) }
button.danger, .danger{ background:var(--danger); color:#fff; border-color:var(--danger) }
.btn.ghost{ background:transparent }

/* Tables */
.table{ width:100%; border-collapse:separate; border-spacing:0; font-size:14px }
.table-wrap{ width:100%; overflow:auto; border:1px solid var(--border); border-radius:12px; background:#fff; box-shadow:var(--shadow) }
.table th, .table td{ border-bottom:1px solid var(--border); padding:calc(10px * var(--ui-scale)) calc(12px * var(--ui-scale)); text-align:left; white-space:nowrap }
.table thead th{ position: sticky; top: 0; background: #f1f5f9; z-index: 1; font-weight:700 }
.table tbody tr:nth-child(even){ background:#fafafa }
.table tbody tr:hover{ background:#f3f4f6 }
.table td:first-child, .table th:first-child{ position:sticky; left:0; background:inherit; z-index:2 }
.table input{ width:100%; min-width:140px; max-width:320px; height:calc(40px * var(--ui-scale)); font-size:calc(15px * var(--ui-scale)) }
.table input[type="checkbox"]{ width:auto; min-width:auto; height:auto; transform:scale(1.2); }
.table input.num{ min-width:110px }
.table input[type="date"]{ min-width:140px }
.table tfoot td{ position:sticky; bottom:0; background:#f8fafc; border-top:2px solid #94a3b8; font-weight:700 }
.table tbody tr:focus-within{ outline:2px solid #93c5fd; outline-offset:-2px }

/* Resizable columns */
.table thead th{ position: sticky; top: 0; background: #f1f5f9; z-index: 1; font-weight:700; }
.table thead th .col-label{ position:relative; padding-right:10px }
.table thead th .col-resizer{ position:absolute; right:-3px; top:0; bottom:0; width:6px; cursor:col-resize; }
.table thead th .col-resizer::after{ content:''; position:absolute; right:2px; top:25%; bottom:25%; width:2px; background:#cbd5e1; opacity:0; transition:opacity .15s }
.table thead th:hover .col-resizer::after{ opacity:1 }
.table thead th .col-resizer:focus{ outline:2px solid #60a5fa; outline-offset:2px }
.table thead th .col-resizer:focus::after{ opacity:1 }

.toolbar{ position:sticky; top:62px; z-index:10; display:flex; gap:8px; margin:8px 0; padding:8px; background:rgba(248,250,252,.8); backdrop-filter:blur(6px); border:1px solid var(--border); border-radius:10px }
.toolbar-group{ display:flex; align-items:center; gap:8px; flex-wrap:wrap }
.toolbar-actions{ margin-left:auto; display:flex; align-items:center; gap:8px; flex-wrap:wrap }

.flash-area{ margin:8px 0 }
.flash{ padding:10px 12px; border-radius:10px; margin:8px 0; display:flex; align-items:center; gap:8px }
.flash.success{ background:#ecfdf5; border:1px solid #059669 }
.flash.error{ background:#fef2f2; border:1px solid #ef4444 }

.grid.two{ display:grid; grid-template-columns:1fr 1fr; gap:16px }
.codebox{ font-family:monospace; font-size:20px; padding:8px; background:#111827; color:#a7f3d0; display:inline-block; border-radius:6px }

/* Portal home month grid */
.grid-months{ display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; }
@media (max-width: 720px){ .grid-months{ grid-template-columns: repeat(3, 1fr); } }
.month-btn{ display:block; border:1px solid var(--border); border-radius:12px; padding:14px; text-decoration:none; color:inherit; transition:all .15s ease; }
.month-btn:hover{ box-shadow:var(--shadow); transform: translateY(-1px); }
.month-btn .m{ font-weight:700; font-size:18px; }
.month-btn .s{ font-size:12px; opacity:.85; }
.month-btn .u{ font-size:11px; opacity:.6; margin-top:4px; }
.month-btn.closed{ background:#ecfdf5; border-color:#10b98155; }
.month-btn.saved{ background:#f8fafc; border-color:#94a3b844; }
.month-btn.none{ background:#fff; }
.month-btn.current{ outline:2px solid #2563eb; }
.legend{ display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }
.badge{ display:inline-block; padding:4px 8px; border-radius:999px; font-size:12px; border:1px solid var(--border); }
.badge.b-closed{ background:#ecfdf5; border-color:#10b98155; }
.badge.b-saved{ background:#f8fafc; border-color:#94a3b844; }
.badge.b-none{ background:#fff; }
.badge.b-current{ background:#e0edff; border-color:#2563eb55; }

/* Utility badges */
.pill-badge{ display:inline-block; margin-left:8px; padding:6px 12px; border-radius:14px; font-weight:600; }
.pill-danger{ background:#FEE2E2; color:#991B1B; }

/* Inputs validity */
input.invalid-ssn{ border-color:#DC2626 !important; background-color:#FEF2F2 !important; }
input.num{ text-align:right }

.actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:8px }
.actionbar{ position:sticky; bottom:0; z-index:12; display:flex; justify-content:flex-end; gap:8px; padding:10px; background:rgba(255,255,255,.9); border:1px solid var(--border); border-radius:12px; margin-top:12px; backdrop-filter:blur(6px) }

/* Layout helpers */
.center{ max-width:560px; margin:20px auto }
.muted{ color:var(--muted) }
.kicker{ text-transform:uppercase; letter-spacing:.12em; font-weight:700; color:#93c5fd; font-size:12px }

/* Chips */
.chips .chip, .chip{
  border:1px solid var(--border); background:#fff; padding:6px 10px; border-radius:999px; cursor:pointer; font-size:12px;
}
.chip.off{ background:#f1f5f9; color:#94a3b8 }

/* Density presets */
body.density-comfortable .table input{ min-width:240px; height:46px; font-size:16px }
body.density-dense .table input{ min-width:140px; height:34px; font-size:14px }

/* Split view */
.split-toggle{ display:flex; gap:8px; align-items:center; }
.split-grid{ display:grid; grid-template-columns: 45% 27.5% 27.5%; gap:12px; align-items:stretch; }
.panel{ background:var(--card); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow); display:flex; flex-direction:column; min-height:560px; max-height:78vh; }
.panel .panel-head{ padding:10px 12px; border-bottom:1px solid var(--border); display:flex; gap:8px; align-items:center }
.panel .panel-head .btn{ height:38px; padding:8px 12px; }
.panel .panel-head .btn + .btn{ margin-left:8px; }
.panel .panel-body{ padding:12px 14px; overflow:auto; }
.panel table{ width:100%; border-collapse:collapse }
.panel table td, .panel table th{ border-bottom:1px solid var(--border); padding:10px; font-size:15px }
.panel input{ width:100%; height:42px; font-size:15px; border:1px solid var(--border); border-radius:10px; padding:8px 10px; background:#fff; outline:none }
.panel input:focus{ border-color:var(--primary); box-shadow:0 0 0 3px rgba(37,99,235,.15) }
.basic-info{ display:grid; grid-template-columns: repeat(2, 1fr); gap:12px; margin-bottom:8px }
.basic-info label{ display:block; font-weight:700; margin-bottom:6px }
.list{ width:100%; border-collapse:collapse }
.list thead th, .list td{ border-bottom:1px solid var(--border); padding:8px; font-size:14px; white-space:nowrap }
/* Ensure split-view list headers render above cells and stay visible */
.list thead th{ position:sticky; top:0; background:#f1f5f9; z-index:2; color:var(--text) }

/* Split view: employee list table */
#splitView table.list{ table-layout: fixed; width:max-content; min-width:100%; }
#splitView table.list thead th{ overflow: visible; }
#splitView table.list tbody td{ overflow: hidden; }
#splitView #empList input.list-input[data-field="사원명"]{ min-width:80px !important; }
#splitView #empList input.list-input[data-field="주민등록번호"]{ min-width:180px !important; }
.list tr.active{ background:#eef2ff }
.list tr:hover{ background:#f8fafc }
.list-input{ width:100%; height:38px; padding:8px 10px; border:1px solid var(--border); border-radius:10px; outline:none; background:#fff; font-size:14px }
.list-input:focus{ border-color:var(--primary); box-shadow:0 0 0 3px rgba(37,99,235,.15) }
.neg{ color:#DC2626 !important; }
.summary{ margin-top:8px; border-top:1px solid var(--border); padding-top:8px; }
.summary .row{ display:flex; justify-content:space-between; padding:4px 0 }
.summary .row.total{ font-weight:800 }

/* KPI cards */
.kpis{ display:grid; grid-template-columns:repeat(4, 1fr); gap:12px; margin:8px 0 }
.kpi{ background:var(--card); border:1px solid var(--border); border-radius:12px; padding:14px; box-shadow:var(--shadow) }
.kpi-title{ color:var(--muted); font-weight:700; font-size:12px; letter-spacing:.08em; text-transform:uppercase }
.kpi-value{ font-size:28px; font-weight:800; margin-top:4px }
.kpi-sub{ margin-top:6px; color:var(--muted); display:flex; align-items:center; gap:8px }
.kpi-sub select{ padding:6px 8px; border:1px solid var(--border); border-radius:8px }
.status-chips .chip{ margin-right:6px }
.search{ max-width:280px }

/* Group & Calc modal layout (unified) */
#groupModal .group-card,
#calcConfigModal .group-card{ max-width:980px; width:96%; max-height:80vh; display:flex; flex-direction:column; }
#exemptConfigModal .group-card{ max-width:780px; width:94%; max-height:80vh; display:flex; flex-direction:column; }
#groupModal .modal-scroll,
#calcConfigModal .modal-scroll,
#exemptConfigModal .modal-scroll{ overflow:auto; border:1px solid var(--border); border-radius:10px; margin:8px 0; background:#fff; }
#groupModal .group-table,
#calcConfigModal .group-table,
#exemptConfigModal .group-table{ width:100%; border-collapse:collapse; table-layout:fixed; }
#groupModal .group-table th:first-child, #groupModal .group-table td:first-child,
#calcConfigModal .group-table th:first-child, #calcConfigModal .group-table td:first-child,
#exemptConfigModal .group-table th:first-child, #exemptConfigModal .group-table td:first-child{ width:42%; }
#groupModal .group-table th.col-type,
#calcConfigModal .group-table th.col-type,
#exemptConfigModal .group-table th.col-type{ width:56px; text-align:center; }
#groupModal .group-table th:last-child, #groupModal .group-table td:last-child{ width:88px; text-align:center; }
#groupModal .group-table th, #groupModal .group-table td,
#calcConfigModal .group-table th, #calcConfigModal .group-table td,
#exemptConfigModal .group-table th, #exemptConfigModal .group-table td{ padding:6px; }
#groupModal .group-table td, #calcConfigModal .group-table td, #exemptConfigModal .group-table td{ vertical-align:middle; }
#groupModal .name-input, #calcConfigModal .name-input{ height:34px; padding:8px 10px; border:1px solid var(--border); border-radius:10px; background:#fff; outline:none; transition:.12s; font-size:13.5px; }
#groupModal .name-input:focus, #calcConfigModal .name-input:focus{ border-color:var(--primary); box-shadow:0 0 0 3px rgba(37,99,235,.15); }
#groupModal .btn-trash{ padding:8px 12px; min-width:88px; }
#groupModal .group-table td:nth-child(2),
#groupModal .group-table td:nth-child(3),
#groupModal .group-table td:nth-child(4){ text-align:center; }
#calcConfigModal .group-table td:nth-child(2),
#calcConfigModal .group-table td:nth-child(3),
#calcConfigModal .group-table td:nth-child(4){ text-align:center; }
#groupModal .group-table input[type="radio"]{ width:18px; height:18px; margin:0; accent-color: var(--primary); }
#calcConfigModal .group-table input[type="checkbox"],
#calcConfigModal .group-table input.as-radio{
  width:18px; height:18px; margin:0; display:inline-block; vertical-align:middle;
  /* Make checkbox look like radio (circle) */
  -webkit-appearance:none; -moz-appearance:none; appearance:none;
  border:2px solid var(--border); border-radius:50%; background:#fff; cursor:pointer;
  transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
#calcConfigModal .group-table input[type="checkbox"]:hover,
#calcConfigModal .group-table input.as-radio:hover{ border-color:#94a3b8; }
#calcConfigModal .group-table input[type="checkbox"]:focus,
#calcConfigModal .group-table input.as-radio:focus{ outline:none; box-shadow:0 0 0 3px rgba(37,99,235,.15); border-color:var(--primary); }
#calcConfigModal .group-table input[type="checkbox"]:checked,
#calcConfigModal .group-table input.as-radio:checked{
  border-color:var(--primary);
  background: radial-gradient(circle at 50% 50%, var(--primary) 55%, transparent 56%);
}
#groupModal .radio-cell{ padding:0; }
#groupModal .radio-wrap{ display:flex; align-items:center; justify-content:center; width:100%; height:100%; padding:6px 0; cursor:pointer; }
#groupModal .radio-cell:hover{ background:#f8fafc; }
#exemptConfigModal .radio-cell{ padding:0; }
#exemptConfigModal .radio-wrap{ display:flex; align-items:center; justify-content:center; width:100%; height:100%; padding:6px 0; cursor:pointer; }
#exemptConfigModal .radio-cell:hover{ background:#f8fafc; }
#calcConfigModal .radio-cell{ padding:0; }
#calcConfigModal .radio-wrap{ display:flex; align-items:center; justify-content:center; width:100%; height:100%; padding:6px 0; cursor:pointer; }
#calcConfigModal .radio-cell:hover{ background:#f8fafc; }
#groupModal .modal-actions,
#calcConfigModal .modal-actions{ display:flex; gap:8px; justify-content:flex-end; }

/* Calc modal specifics to match group modal visuals */
#calcConfigModal .calc-card{ max-width:980px; }
#calcConfigModal .group-table .col-type{ width:56px; text-align:center; }
#calcConfigModal .group-table input[type="checkbox"]{ width:18px; height:18px; margin:0; accent-color: var(--primary); }
/* Modals */
.modal{ display:none; position:fixed; inset:0; background:rgba(15,23,42,.4); z-index:66; align-items:center; justify-content:center; }
.calc-card h2{ font-size:18px; }
.calc-table thead th{ position:sticky; top:0; background:#F8FAFC; z-index:1; }
.calc-table td, .calc-table th{ padding:10px; }
.calc-table tbody tr:nth-child(odd){ background:#FAFAFA; }
.calc-table .col-name{ text-align:left; }
.calc-table .col-type{ width:160px; text-align:center; white-space:nowrap; }
.calc-table input[type=checkbox]{ width:18px; height:18px; }
.group-card .muted{ color:#64748B; font-size:12px; }
.diff-add{ color:#065f46; display:block; }
.diff-del{ color:#991b1b; display:block; }

/* Compact view mode */
body.view-compact .form input, body.view-compact .form select, body.view-compact .form textarea{ padding:8px 10px; font-size:14px }
body.view-compact .table th, body.view-compact .table td{ padding:6px 8px; }
body.view-compact .btn, body.view-compact button{ padding:6px 10px }
body.view-compact .kpi{ padding:10px }

/* Sticky (fixed) columns */
.sticky-col{ position:sticky; background:#fff; z-index:3 }
.sticky-col{ box-shadow: 2px 0 0 rgba(203,213,225,.8); }
.sticky-col input{ background:#fff }

/* Drawer (row details) */
.drawer{ position:fixed; inset:0; z-index:60; }
.drawer-panel{ position:absolute; top:0; right:0; width:720px; max-width:96vw; height:100%; background:#fff; border-left:1px solid var(--border); box-shadow:var(--shadow); display:flex; flex-direction:column }
.drawer-backdrop{ position:absolute; inset:0; background:rgba(2,6,23,.35); backdrop-filter:blur(2px) }
.drawer-head, .drawer-foot{ display:flex; align-items:center; gap:8px; padding:12px; border-bottom:1px solid var(--border) }
.drawer-foot{ border-top:1px solid var(--border); border-bottom:none; margin-top:auto; justify-content:flex-end }
.drawer-body{ padding:14px; overflow:auto; display:grid; grid-template-columns:1fr 1fr; gap:12px }
@media (max-width: 720px){ .drawer-body{ grid-template-columns:1fr; } }
.drawer-body label{ font-weight:600 }
.card-narrow{ max-width:700px; width:90%; }
.card-640{ max-width:640px; width:90%; }
.card-720{ max-width:720px; width:90%; }
.card-520{ max-width:520px; width:90%; }
.card-wide{ max-width:980px; width:96%; }
.modal-scroll{ max-height: calc(100vh - 260px); overflow:auto; border:1px solid var(--border); border-radius:10px; padding:8px; margin:8px 0; background:#fff; }
.modal-scroll-md{ max-height: calc(100vh - 220px); overflow:auto; border:1px solid var(--border); border-radius:10px; padding:8px; margin:8px 0; background:#fff; }
.modal-scroll-sm{ max-height:40vh; overflow:auto; border:1px solid var(--border); border-radius:10px; padding:8px; margin:8px 0; background:#fff; }
.modal-actions{ display:flex; gap:8px; justify-content:flex-end; }

/* Page-specific badges */
.pill-badge{ display:inline-block; margin-left:8px; padding:6px 12px; border-radius:14px; font-weight:600; }
.pill-danger{ background:#FEE2E2; color:#991B1B; }

/* Inputs validity */
input.invalid-ssn{ border-color:#DC2626 !important; background-color:#FEF2F2 !important; }

/* Misc */
.vr{ display:inline-block; width:1px; height:22px; background:#E2E8F0; }
.row.spacer{ margin-top:8px; border-top:1px dashed var(--border); padding-top:8px }
